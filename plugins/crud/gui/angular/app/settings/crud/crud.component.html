<!--
    Author:     Thomas D'haenens
    License:    GPL-3.0
    Link:       https://github.com/BENEATLY/neat-community-plugins/
    Contact:    https://neatly.be/
-->


<!-- Determine if Route is Allowed -->
<div *ngIf="routeAllowed()" class="result-div with-footer">

<!-- Navigation Header -->
<app-template-navigation-header [context]="context" [defaultObjectView]="true">

  <!-- Left -->
  <ng-container left>

    <!-- Crud Object Selection -->
    <mat-form-field class="in-navbar">
      <mat-select selectDir [(ngModel)]="crudSelector.apiObject" [placeholder]="crudPlaceHolder" (selectionChange)="updateSelectedApiObject()">
        <select-filter [searchPlaceHolder]="translate.instant('common.table.search')" [fullList]="crudOptions" [searchAttribute]="'_presentationValue'" (searchResult)="filteredCrudOptions = $event"></select-filter>
        <mat-option *ngFor="let option of filteredCrudOptions" [value]="option.name">
          {{ option._presentationValue }}
        </mat-option>
      </mat-select>
    </mat-form-field>

  </ng-container>

</app-template-navigation-header>

<!-- Results -->
<div class="results">

  <!-- API Object Selected -->
  <ng-container *ngIf="objectDefinition">

    <!-- Filter Palette -->
    <app-template-filter-palette [context]="context"></app-template-filter-palette>

    <!-- Display Result Table -->
    <app-template-result-table [context]="context"></app-template-result-table>

  </ng-container>

</div>

<!-- Footer -->
<app-template-footer></app-template-footer>

</div>
